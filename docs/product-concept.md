## プロダクトコンセプト / ペルソナ定義（一次ドラフト）

### プロダクト概要
- **一言説明**: テニスやバドミントンのダブルスの組み合わせを偏りがないよう自動生成し、運営をスムーズにするWebアプリ
- **主要利用シーン**: 社会人サークルの練習会で、会場にいる運営者がスマホ/タブレット/PCから利用
- **対応プラットフォーム**: Web（モバイル/タブレット/PC）。ローカル保存を活用し、電波が弱い環境でも最低限の継続運用を想定（localStorage）
- **ビジョン**: 公平・速い・楽しい運営を手軽に実現し、参加者体験を底上げする

### 事業・成功指標
- **収益化方針**: アプリ内広告で小規模マネタイズ（お小遣い程度）
- **短〜中期KPI（例）**
  - 月間ユニーク運営者数（MAU-Organizers）
  - 1セッションあたりの生成ラウンド数（回転数）
  - 公平性指標の維持（下記）

### ターゲット / 導入主体
- **主要ユーザー**: 社会人サークルの運営者（20代後半〜50代、競技レベルは不問）
- **導入主体**: サークル代表（個人主催者）
- **参加者前提**: 通し番号で管理。個人情報は保持しない

### ペルソナ
1) 主催者ペルソナ（代表例）
   - 属性: 社会人サークル代表。日常的にスマホ利用。ITは普通レベル
   - 重要視: 公平 / 交流 / スピード
   - 課題: 手動運用で偏り・同対戦の連発・遅延。途中参加/休憩者の取り扱いが煩雑
   - 成功の定義: その場で手早く公平な組合せが作れ、現場の不満が減る

2) 参加者ペルソナ（代表例）
   - 属性: 20〜50代、スマホ日常利用
   - 重要視: 公平 / 交流 / スピード
   - 期待: 同じ人ばかりと組まされない・待ち時間が偏らない

### ジョブ（JTBD）
- 練習会のたびに、参加者の出入りや休憩を考慮しつつ、公平にペアと対戦を割り当てたい
- ラウンド終了ごとに素早く次の組み合わせを提示し、会場の回転を落とさず進行したい

### 価値提案（Value Proposition）
- **コア価値**: 手軽に、公平性の高いダブルス組合せを自動生成
- **解消する不満**:
  - 途中参加/途中退出（休憩）を考慮できない → プレイヤーの休憩フラグ（onBreak）による参加可否制御
  - 手動入れ替えができない → 生成後のプレイヤー入れ替え（swap）機能
  - 偏り（同ペア・同対戦の連発） → 直前ラウンドの同一ペア/同一対戦を強ペナルティで回避、履歴による累積回避

### 主なユースケース / フロー
1. 受付（通し番号でプレイヤーを追加/削除、休憩設定）
2. コート数設定（上限10）
3. 組み合わせ生成（空きコート分だけ自動生成）
4. コート割当（生成結果をそのまま使用）
5. 試合結果入力（勝者記録）
6. 次試合生成（履歴を反映して公平性継続）

※ 現場ボトルネック想定: 途中参加/休憩者の管理と、公平性を保った素早い再生成

### 公平性ロジック（コード反映）
- 直前ラウンドの同一ペア/同一対戦を強いペナルティ付与で回避
- ペア履歴・対戦履歴の累積回数をスコア化し、スコアが最小となる組を選択
- 参加回数の均衡化: 待機者から `gamesPlayed` が少ない順に選抜し、必要数を充足
- 勝敗は `wins` に集計、履歴/状態は `localStorage` 保存

### 現状の主要機能（コードから）
- プレイヤー管理: 追加/削除/休憩（`onBreak`）
- 組合せ生成: 連続回避・履歴考慮・参加回数の均衡化
- コート管理: `MAX_COURTS = 10`
- 結果記録: 勝者の更新/取り消し
- 手動調整: 生成後のプレイヤー入れ替え（swap）
- 履歴可視化: ペア履歴/対戦履歴テーブル
- 永続化: `localStorage` による状態保存

### 差別化 / 競合
- 競合: iOSアプリ等の既存ツール
- 勝ち筋: 手軽さ（ブラウザ即使用、インストール不要）と柔軟さ（途中参加・休憩・手動入替・履歴公平化）

### 体験原則 / ブランドトーン
- トーン: 速さ / 公平 / 楽しさ
- UX原則:
  - ワンタップで再生成（操作の単純化）
  - 同ペア/同対戦の連発を避ける（不満最小化）
  - 途中参加・休憩の即時反映（現場リアルタイム性）
  - オフラインでも最低限継続（ローカル保存）

### 設定・パラメータ（初期）
- コート数上限: 10
- 試合時間: 未管理（会場ルールに委譲）
- 待ち時間: 未管理（`gamesPlayed` バランスで近似的に平準化）
- 回避強度: 直前ラウンドの同一ペア/対戦は強ペナルティ（=実質回避）

### 成功指標（KPI / UXメトリクス）
- 参加回数の分散（max-min の差 ≤ 1 を目標）
- 同一ペア/同一対戦の連続発生率（限りなく0に近づける）
- ラウンド生成までの平均操作回数（最小化）
- セッション継続率/回遊（1セッションあたりの生成回数）

### 今後の拡張の方向性（案）
- オフライン強化（PWA化）
- 軽微なレベル差考慮のオプション（任意）
- 広告枠のUX最適化（運営操作の邪魔をしない配置）
